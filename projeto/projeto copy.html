<meta charset="UTF-8">

<h1> DESAFIO: JOGO DA VELHA </h1>
<script>
    var vezDaJogada = 1;
    var estadoDoJogo = 0;
    var vencedor, linha, coluna;

    var tabuleiro = [    ["", "", ""],
                         ["", "", ""],
                         ["", "", ""]   
                    ];

    const MENSAGENS = { VITORIA: `O jogador ${vencedor} venceu! Parabéns!`,
                        EMPATE: "O jogo empatou!!",
                        JOGADA_INVALIDA_JA_OCUPADO: "Jogada inválida! A posição já está ocupada. Tente novamente.",
                        JOGADA_INVALIDA_NAO_EXISTE: "Jogada inválida! A linha e/ou coluna requisitada não existe. Tente novamente." };

// Ações do tabuleiro
    function exibirTabuleiro() {
        for (let linha=0; linha < tabuleiro.length; linha++) {
            for(let coluna=0; coluna < tabuleiro.length; coluna++){
                document.write( `[${tabuleiro[linha][coluna]} ]`)
            }
        document.write("<br>");       
        }
    }

    function jogar(tabuleiro, jogador, vezDaJogada) {
    alert("A numeração das linhas e colunas do tabuleiro segue este esquema:\n[0,0][0,1][0,2]\n[1,0][1,1][1,2]\n[2,0][2,1][2,2]");
    linha = prompt(`Rodada ${vezDaJogada}. Participante ${jogador}, escolha a linha [0, 1 ou 2] que deseja jogar:`);
    coluna = prompt(`Rodada ${vezDaJogada}. Participante ${jogador}, escolha a coluna [0, 1 ou 2] que deseja jogar:`);
    tabuleiro[linha][coluna] = jogador;
    setTimeout(() => {
        document.write("<br><br>" + (`Rodada ${vezDaJogada}!`).bold() + "<br><br>");
        document.write(`Jogador ${JOGADOR2}` + "<br><br>");
        jogar(tabuleiro, JOGADOR2, vezDaJogada);
        exibirTabuleiro();
        vezDaJogada++;
    }, 1000);
}

// Definindo os símbolos dos jogadores
    alert("JOGO DA VELHA!");

    var i = 0;
    var JOGADOR2;
        while(i==0){
            var JOGADOR1 = prompt("Escolha X ou O para usar durante o jogo: ");

            if(JOGADOR1.toUpperCase() != "X" && JOGADOR1.toUpperCase() != "O"){
                alert("Símbolo inválido. Por favor, escolha entre X ou O!");
            }
            else{
                if (JOGADOR1.toUpperCase() == "X"){
                    JOGADOR2 = "O"; 
                }
                else{
                    var JOGADOR2 = "X";   
                }
                document.write(`O símbolo do Jogador 1 é: ${JOGADOR1}. O símbolo do Jogador 2 é: ${JOGADOR2}.` + "<br>")
                i = 1;
            }
        }

// Execução do jogo: Enquanto o estadoDoJogo for zero executar os pedidos de posição de linha e coluna e verificações
    while(estadoDoJogo==0){
        document.write("<br><br>" + (`Rodada ${vezDaJogada}!`).bold() + "<br><br>");
        document.write(`Jogador ${JOGADOR1}` + "<br><br>");
        jogar(tabuleiro, JOGADOR1, vezDaJogada);
        exibirTabuleiro();

        document.write("<br>"+ `Jogador ${JOGADOR2}` + "<br><br>");
        jogar(tabuleiro, JOGADOR2, vezDaJogada);
        exibirTabuleiro();

        // Verificar se venceu: estadoDoJogo=1;

        // Verificar se empatou: estadoDoJogo=1;

        //Verificar se não: estadoDoJogo = 0; continue no laço

        vezDaJogada++;
    }

    // Quando o estadoDoJogo for igual a 1, sair do lado
    //      alert(MENSAGENS.VITORIA)
    //      alert(MENSAGENS.EMPATE)
</script>
